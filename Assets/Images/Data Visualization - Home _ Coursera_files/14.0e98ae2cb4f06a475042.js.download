(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"23qH":function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,r=_interopRequireDefault(e("iCc5")),n,o=_interopRequireDefault(e("FYw3")),u,a=_interopRequireDefault(e("mRg0")),i,s,l,p;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var d=(s=i=function(e){function OnDemandDiscussionQuestions(){return(0,r.default)(this,OnDemandDiscussionQuestions),(0,o.default)(this,e.apply(this,arguments))}return(0,a.default)(OnDemandDiscussionQuestions,e),OnDemandDiscussionQuestions}(_interopRequireDefault(e("W3Lk")).default),i.RESOURCE_NAME="onDemandDiscussionQuestions.v1",s);exports.default=d},"2jK5":function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,r=_interopRequireDefault(e("iCc5")),n,o=_interopRequireDefault(e("FYw3")),u,a=_interopRequireDefault(e("mRg0")),i,s,l,p=_interopRequireDefault(e("W3Lk")),d,f=_interopRequireDefault(e("FGtb"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var c=(s=i=function(e){function OnDemandDiscussionPrompts(){return(0,r.default)(this,OnDemandDiscussionPrompts),(0,o.default)(this,e.apply(this,arguments))}return(0,a.default)(OnDemandDiscussionPrompts,e),OnDemandDiscussionPrompts}(p.default),i.RESOURCE_NAME="onDemandDiscussionPrompts.v1",i.DEFAULT_INCLUDES=["question"],i.DEFAULT_FIELDS=["promptType",f.default.RESOURCE_NAME+"("+f.default.DEFAULT_FIELDS.join(",")+")"],s);exports.default=c},BMks:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RespondedLearnersImage=exports.Completed=exports.Saving=exports.Input=void 0;var t,r=_interopRequireDefault(e("iCc5")),n,o=_interopRequireDefault(e("FYw3")),u,a=_interopRequireDefault(e("mRg0")),i,s,l,p,d,f,c,m=_interopRequireDefault(e("sbe7")),D=e("l2sx"),v,g=_interopRequireDefault(e("VYij")),R,q=_interopRequireDefault(e("wiyT")),h,y=_interopRequireDefault(e("CWYE")),I,C=_interopRequireDefault(e("BDKN")),P=e("hN99"),E,b=_interopRequireDefault(e("y1LI")),S,w=_interopRequireDefault(e("rcV8")),T,L=_interopRequireDefault(e("8cuT")),x,N=_interopRequireDefault(e("ZEYT")),F,A=_interopRequireDefault(e("g21z")),M=e("V4Vm"),j=e("SaLm"),O,U=_interopRequireDefault(e("GP6s"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Q=4,k=(s=i=function(e){function RespondedLearnersImageBaseComponent(){return(0,r.default)(this,RespondedLearnersImageBaseComponent),(0,o.default)(this,e.apply(this,arguments))}return(0,a.default)(RespondedLearnersImageBaseComponent,e),RespondedLearnersImageBaseComponent.prototype.renderMorePeopleImage=function renderMorePeopleImage(){if(this.props.responseCount>4){var e=(0,M.formatCount)(this.props.responseCount-4,!0);return m.default.createElement("li",{className:"bgcolor-black-g3"},m.default.createElement("div",{className:"horizontal-box align-items-absolute-center num-responder-images caption-text"},"+",e))}return null},RespondedLearnersImageBaseComponent.prototype.render=function render(){var e=this.props.answers,t=e&&e.filter(function(e,t){return t<4}).map(function(e){return{image:e.creator.photoUrl,name:e.creator.fullName}});if(!t||0===t.length)return null;return m.default.createElement("ul",{className:"nostyle horizontal-box align-items-absolute-center learner-image-list"},t.map(function(e){var t=e.name,r=e.image;return m.default.createElement("li",{key:t},m.default.createElement(A.default,{width:32,height:32,fullName:t,profileImageUrl:r}))}),this.renderMorePeopleImage())},RespondedLearnersImageBaseComponent}(m.default.Component),i.propTypes={responseCount:m.default.PropTypes.number.isRequired,answers:m.default.PropTypes.array},s),B=(p=l=function(e){function Input(){return(0,r.default)(this,Input),(0,o.default)(this,e.apply(this,arguments))}return(0,a.default)(Input,e),Input.prototype.render=function render(){var e=this.props,t=e.question,r=e.savingState,n=e.placeholder;return m.default.createElement("div",{className:"horizontal-box align-items-left theme-light c-prompt-card"},m.default.createElement(N.default,{hideFollow:!0,question:t,parentPost:t,savingState:r,placeholder:(0,U.default)(n)}))},Input}(m.default.Component),l.propTypes={placeholder:m.default.PropTypes.string.isRequired,question:m.default.PropTypes.object.isRequired,savingState:m.default.PropTypes.string.isRequired},p),W=function(e){function Saving(){return(0,r.default)(this,Saving),(0,o.default)(this,e.apply(this,arguments))}return(0,a.default)(Saving,e),Saving.prototype.render=function render(){return m.default.createElement("div",{className:"horizontal-box align-items-absolute-center bgcolor-white c-prompt-card color-hint-text"},m.default.createElement(b.default,{name:"spinner",className:"cif-spin"}),m.default.createElement("span",{className:"caption-text"},(0,U.default)("Submitting Your Response")))},Saving}(m.default.Component),Y=(f=d=function(e){function CompletedBaseComponent(){return(0,r.default)(this,CompletedBaseComponent),(0,o.default)(this,e.apply(this,arguments))}return(0,a.default)(CompletedBaseComponent,e),CompletedBaseComponent.prototype.render=function render(){return m.default.createElement("div",{className:"vertical-box align-items-absolute-center bgcolor-white c-prompt-card"},m.default.createElement("span",{className:"color-secondary-text"},(0,U.default)("Your response has been submitted. Engage and discuss with other learners below!")),this.props.url&&m.default.createElement("button",{className:"secondary c-prompt-link-button"},m.default.createElement(D.Link,{className:"nostyle",to:this.props.url},(0,U.default)("View My Response"))))},CompletedBaseComponent}(m.default.Component),d.propTypes={showLink:m.default.PropTypes.bool,questionId:m.default.PropTypes.string.isRequired,url:m.default.PropTypes.string},f),V={Input:B,Saving:W,Completed:g.default.compose((0,w.default)(function(e){if(e.showLink){var t=(0,y.default)("/api/onDemandCourseForumAnswers.v1/",{type:"rest"}),r=[e.userId,e.courseId,e.questionId].join("~"),n=(new C.default).addQueryParam("q","byForumQuestionId").addQueryParam("userCourseQuestionId",r).addQueryParam("sort","createdAtAsc").addQueryParam("creatorId",e.userId).toString();return(0,q.default)(t.get(n)).then(function(e){if(!e.elements.length)return{url:void 0};var t;return{url:(0,P.buildUrlForDiscussionPrompt)(e.elements[0].forumAnswerId)}})}return(0,q.default)({url:void 0})}))(Y),RespondedLearnersImage:g.default.compose((0,L.default)(["ThreadDetailsStore"],function(e,t){var r=e.ThreadDetailsStore,n=t.questionId,o=t.page;return{answers:r.getReplies(n,o,j.answerSorts.newestSort)||[]}}))(k)};exports.Input=B,exports.Saving=W;var G=V.Completed,z=V.RespondedLearnersImage;exports.Completed=G,exports.RespondedLearnersImage=z,exports.default=V},FGtb:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,r=_interopRequireDefault(e("iCc5")),n,o=_interopRequireDefault(e("FYw3")),u,a=_interopRequireDefault(e("mRg0")),i,s,l,p;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var d=(s=i=function(e){function OnDemandDiscussionPromptQuestions(){return(0,r.default)(this,OnDemandDiscussionPromptQuestions),(0,o.default)(this,e.apply(this,arguments))}return(0,a.default)(OnDemandDiscussionPromptQuestions,e),OnDemandDiscussionPromptQuestions}(_interopRequireDefault(e("W3Lk")).default),i.RESOURCE_NAME="onDemandDiscussionPromptQuestions.v1",i.DEFAULT_FIELDS=["content","creatorId","createdAt","forumId","sessionId","lastAnsweredBy","lastAnsweredAt","totalAnswerCount","topLevelAnswerCount","viewCount"],s);exports.default=d},IUrA:function(module,exports,e){},RX7l:function(module,exports,e){var t=e("IUrA"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},TpA2:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,r=_interopRequireDefault(e("VYij")),n,o=_interopRequireDefault(e("PStO")),u,a=_interopRequireDefault(e("jsrg")),i,s=_interopRequireDefault(e("VXRf")),l=e("PDuk"),p,d=_interopRequireDefault(e("sQ/U")),f,c=_interopRequireDefault(e("2jK5")),m,D=_interopRequireDefault(e("FGtb")),v=e("SaLm"),g,R=_interopRequireDefault(e("bmRM"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var q=r.default.compose(o.default.createContainer(function(e){var t=e.itemMetadata,r=t.getId(),n=t.get("course").get("id");return{prompt:c.default.get((0,l.tupleToStringKey)([d.default.get().id,n,r]),{includes:c.default.DEFAULT_INCLUDES,fields:c.default.DEFAULT_FIELDS})}}),o.default.createContainer(function(e){var t=e.prompt;if(!t||!t.promptType)return{};var r=t.promptType.definition.courseItemForumQuestionId,n=[t.userId,r].join("~");return{discussionPromptQuestion:D.default.localGet(n,{fields:D.default.DEFAULT_FIELDS})}}),(0,a.default)(function(e){var t;return!!e.discussionPromptQuestion}),(0,s.default)(function(e){var t=e.discussionPromptQuestion,r=t&&t.id.split("~")[3],n;return{isLoaded:!0,questionId:r,question:{id:r,questionId:r,type:"question",forumType:v.naptimeForumTypes.rootForumType},promptContent:t&&t.content.details,learnerCount:t&&t.totalAnswerCount}}))(R.default);exports.default=q},WdIA:function(module,exports,e){var t=e("a+4D"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},"a+4D":function(module,exports,e){},bmRM:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,r=_interopRequireDefault(e("iCc5")),n,o=_interopRequireDefault(e("FYw3")),u,a=_interopRequireDefault(e("mRg0")),i,s,l,p=_interopRequireDefault(e("sbe7")),d,f=_interopRequireDefault(e("sQ/U")),c=e("kvW3"),m=e("wvdd"),D,v=_interopRequireDefault(e("BZ+2")),g=e("0jv7"),R=e("SaLm"),q,h=_interopRequireDefault(e("y1LI")),y,I=_interopRequireDefault(e("JUgE")),C,P=_interopRequireDefault(e("EWSN")),E=e("BMks"),b,S=_interopRequireDefault(e("GP6s"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("RX7l");var w=(s=i=function(e){function DiscussionPrompt(t,n){(0,r.default)(this,DiscussionPrompt);var u=(0,o.default)(this,e.call(this,t,n));return u.state={savingState:g.savingStates.UNCHANGED,forumError:!1},u}return(0,a.default)(DiscussionPrompt,e),DiscussionPrompt.prototype.componentDidMount=function componentDidMount(){this.props.isLoaded&&(this.setState({questionId:this.props.questionId}),this.fetchAnswers(this.props.questionId,R.answerSorts.newestSort,this.props.page))},DiscussionPrompt.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.state.questionId;this.setState({savingState:e.savingStates[t]||g.savingStates.UNCHANGED}),t&&this.props.savingStates[t]===g.savingStates.SAVING&&e.savingStates[t]===g.savingStates.SAVED&&this.fetchAnswers(t,R.answerSorts.newestSort,this.props.page)},DiscussionPrompt.prototype.componentDidUpdate=function componentDidUpdate(e,t){var r=this.props,n=r.questionId,o=r.page;e.page!==o&&this.fetchAnswers(n,R.answerSorts.newestSort,o)},DiscussionPrompt.prototype.fetchAnswers=function fetchAnswers(e,t,r){var n=this.props,o=n.courseId,u=n.courseSlug,a=n.currentForum,i;(0,this.context.executeAction)(m.fetchAnswers,{questionId:e,courseId:o,courseSlug:u,sort:t,page:r,contextId:o,userId:f.default.get().id,forumType:a.forumType.typeName})},DiscussionPrompt.prototype.renderLoading=function renderLoading(){return p.default.createElement("div",{className:"vertical-box align-items-vertical-center"},p.default.createElement(h.default,{name:"spinner",className:"cif-spin cif-3x"}))},DiscussionPrompt.prototype.renderInput=function renderInput(){var e=this.props,t=e.learnerCount,r=e.question,n=e.questionId,o=e.page,u=t>0;return p.default.createElement("div",null,p.default.createElement("div",{className:"color-hint-text participation-text"},(0,S.default)("Participation is optional")),p.default.createElement(E.Input,{savingState:this.state.savingState,question:r,placeholder:(0,S.default)("Type your response here...")}),p.default.createElement(E.RespondedLearnersImage,{responseCount:t,questionId:n,page:o}),p.default.createElement("div",{className:"horizontal-box align-items-absolute-center caption-text color-secondary-text"},u?p.default.createElement("div",null,p.default.createElement(c.FormattedNumber,{value:t})," ",p.default.createElement(c.FormattedMessage,{message:(0,S.default)("{learnerCount, plural, =1 { learner has} other { learners have}} submitted a response."),learnerCount:t})):p.default.createElement("div",null,(0,S.default)("Be the first to submit a response"))))},DiscussionPrompt.prototype.renderError=function renderError(){return p.default.createElement("div",{className:"horizontal-box align-items-absolute-center bgcolor-white c-prompt-card"},p.default.createElement("span",{className:"caption-text color-secondary-text"},(0,S.default)("Sorry, we were unable to retrieve a forum.")))},DiscussionPrompt.prototype.renderCompleted=function renderCompleted(){var e=this.props,t=e.questionId,r=e.previouslyCompleted,n=e.page,o=e.currentForum,u=e.answerId,a=e.currentForumUrl,i=e.courseId;return p.default.createElement("div",null,p.default.createElement(E.Completed,{showLink:r,questionId:t,userId:f.default.get().id,courseId:i}),p.default.createElement("div",{className:"c-thread-container"},p.default.createElement(P.default,{sort:R.answerSorts.newestSort,page:n,forumId:o.id,questionId:t,answerId:u,forumLink:a})))},DiscussionPrompt.prototype.renderContent=function renderContent(){var e=this.state.savingState;if(e===g.savingStates.SAVED||this.props.previouslyCompleted)return this.renderCompleted();if(e===g.savingStates.UNCHANGED)return this.renderInput();if(e===g.savingStates.SAVING)return p.default.createElement(E.Saving,null);return!1},DiscussionPrompt.prototype.renderBody=function renderBody(){var e=this.props.promptContent;return p.default.createElement("div",null,p.default.createElement("span",null,p.default.createElement(I.default,{cml:e})),this.renderContent())},DiscussionPrompt.prototype.render=function render(){var e=this.props.isLoaded,t=this.state.forumError;return p.default.createElement("div",{className:"rc-DiscussionPrompt"},!t&&(e?this.renderBody():this.renderLoading()),t&&this.renderError())},DiscussionPrompt}(p.default.Component),i.propTypes={savingStates:p.default.PropTypes.object.isRequired,previouslyCompleted:p.default.PropTypes.bool.isRequired,page:p.default.PropTypes.number,answerId:p.default.PropTypes.string,courseId:p.default.PropTypes.string,courseSlug:p.default.PropTypes.string,currentForum:p.default.PropTypes.instanceOf(v.default),currentForumUrl:p.default.PropTypes.string,questionId:p.default.PropTypes.string,question:p.default.PropTypes.object,promptContent:p.default.PropTypes.object,learnerCount:p.default.PropTypes.number,isLoaded:p.default.PropTypes.bool},i.contextTypes={executeAction:p.default.PropTypes.func.isRequired,router:p.default.PropTypes.object.isRequired},s);exports.default=w},geBo:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t,r=_interopRequireDefault(e("iCc5")),n,o=_interopRequireDefault(e("FYw3")),u,a=_interopRequireDefault(e("mRg0")),i,s=_interopRequireDefault(e("QbLZ")),l,p,d,f=_interopRequireDefault(e("sbe7")),c=e("VYij"),m,D=_interopRequireDefault(e("ngyh")),v,g=_interopRequireDefault(e("+LJP")),R,q=_interopRequireDefault(e("8cuT")),h,y=_interopRequireDefault(e("pqXt")),I,C=_interopRequireDefault(e("TpA2")),P,E=_interopRequireDefault(e("jzks")),b,S=_interopRequireDefault(e("oQ9N")),w,T=_interopRequireDefault(e("KMW/")),L,x=_interopRequireDefault(e("UU2Q"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var N=function discussionPromptContainer(){return C.default},F=(0,c.compose)((0,S.default)({fields:["forumType","urlId"]}),(0,g.default)(function(e,t){return(0,s.default)({},(0,y.default)(e,t),{page:e.location.query.page?parseInt(e.location.query.page,10):1,answerId:e.location.query.answerId?e.location.query.answerId:void 0})}),(0,q.default)(["ThreadDetailsStore"],function(e,t){var r=e.ThreadDetailsStore,n=t.itemMetadata;return{savingStates:Object.assign({},r.savingStates)}}))(N()),A=(p=l=function(e){function FluxibleConnectedDiscussionPrompt(){return(0,r.default)(this,FluxibleConnectedDiscussionPrompt),(0,o.default)(this,e.apply(this,arguments))}return(0,a.default)(FluxibleConnectedDiscussionPrompt,e),FluxibleConnectedDiscussionPrompt.prototype.componentWillMount=function componentWillMount(){this.fluxibleContext=(0,x.default)(this.context.fluxibleContext)},FluxibleConnectedDiscussionPrompt.prototype.render=function render(){return f.default.createElement(D.default,{context:this.fluxibleContext.getComponentContext()},f.default.createElement(F,this.props))},FluxibleConnectedDiscussionPrompt}(f.default.Component),l.contextTypes={fluxibleContext:f.default.PropTypes.object},p);exports.default=A},jzks:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,r=_interopRequireDefault(e("VYij")),n,o=_interopRequireDefault(e("PStO")),u,a=_interopRequireDefault(e("jsrg")),i,s=_interopRequireDefault(e("VXRf")),l,p=_interopRequireDefault(e("23qH")),d=e("SaLm"),f,c=_interopRequireDefault(e("bmRM"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var m=r.default.compose(o.default.createContainer(function(e){var t=e.userId,r=e.itemMetadata,n=r.getId(),o=r.get("course").get("id");return{legacyDiscussionQuestionResults:p.default.finder("byPromptItem",{params:{courseId:o,itemId:n,sort:d.answerSorts.newestSort}})}}),(0,a.default)(function(e){var t;return!!e.legacyDiscussionQuestionResults}),(0,s.default)(function(e){var t=e.legacyDiscussionQuestionResults,n=(0,r.default)(t).first(),o=n&&n.id,u;return{isLoaded:!0,questionId:o,question:{id:o,questionId:o,type:"question",forumType:d.naptimeForumTypes.rootForumType},promptContent:n&&n.content.details,learnerCount:n&&(n.answerCount||n.topLevelAnswerCount)}}))(c.default);exports.default=m},thMO:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,r=_interopRequireDefault(e("iCc5")),n,o=_interopRequireDefault(e("FYw3")),u,a=_interopRequireDefault(e("mRg0")),i,s=_interopRequireDefault(e("uxKl")),l,p=_interopRequireDefault(e("CkRy")),d,f=_interopRequireDefault(e("sbe7")),c,m=_interopRequireDefault(e("geBo"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("WdIA");var D=function(e){function DiscussionPromptWrapper(){return(0,r.default)(this,DiscussionPromptWrapper),(0,o.default)(this,e.apply(this,arguments))}return(0,a.default)(DiscussionPromptWrapper,e),DiscussionPromptWrapper.prototype.render=function render(){var e=this.props,t=e.computedItem,r=e.itemMetadata;return f.default.createElement(p.default,{className:"rc-DiscussionPromptWrapper",hideFeedback:!0},f.default.createElement("div",{className:"discussion-prompt-content"},f.default.createElement("div",{className:"vertical-box align-items-vertical-center"},f.default.createElement("div",null,f.default.createElement("span",{className:"cif-stack cif-2x"},f.default.createElement("i",{className:"cif-circle cif-stack-2x c-prompt-icon"}),f.default.createElement("i",{className:"cif-comment cif-stack-1x cif-inverse comment-icon"}))),f.default.createElement("h4",{className:"c-prompt-title"},t.name)),f.default.createElement(m.default,{itemMetadata:r,previouslyCompleted:t.isCompleted})))},DiscussionPromptWrapper}(f.default.Component);exports.default=D}}]);
//# sourceMappingURL=14.0e98ae2cb4f06a475042.js.map